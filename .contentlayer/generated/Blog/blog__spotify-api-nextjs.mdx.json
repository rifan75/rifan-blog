{
  "title": "Using the Spotify API with Next.js",
  "publishedAt": "2020-07-21",
  "summary": "Learn how to authenticate with the Spotify API to fetch your top tracks in a Next.js API route.",
  "image": "/static/images/spotify-api-nextjs/banner.png",
  "body": {
    "raw": "\r\nOne of my favorite parts of my website is my [dashboard](/dashboard).\r\nIt's a fun, unique way for me to showcase various metrics about my life.\r\nIt's also a playground for experimenting with new technology and APIs.\r\nIt currently has integrations with YouTube, Unsplash, Firebase, [Revue](/snippets/revue), GitHub, Gumroad, and now Spotify!\r\n\r\nI wanted to display what song I'm currently listening to, as well as my top tracks.\r\nTo accomplish this, I'd need to integrate [Spotify's API](https://developer.spotify.com/documentation/web-api/) with Next.js [API routes](https://nextjs.org/docs/api-routes/introduction).\r\nThis post will be a quick tutorial to get up and running with Spotify.\r\n\r\n## Create an Application\r\n\r\nFirst, we need to create a Spotify application to give us credentials to authenticate with the API.\r\n\r\n- Go to your [Spotify Developer Dashboard](https://developer.spotify.com/dashboard/) and log in.\r\n- Click **Create an App**.\r\n- Fill out the name and description and click **create**.\r\n- Click **Show Client Secret**.\r\n- Save your Client ID and Secret. You'll need these soon.\r\n- Click **Edit Settings**.\r\n- Add `http://localhost:3000` as a redirect URI.\r\n\r\nAll done! You now have a properly configured Spotify application and the correct credentials to make requests.\r\n\r\n## Authentication\r\n\r\nThere are a variety of ways to authenticate with the Spotify API, depending on your application. Since we only need permission granted _once_, we'll use the [Authorization Code Flow](https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow).\r\n\r\nFirst, we'll have our application request authorization by logging in with whatever [scopes](https://developer.spotify.com/documentation/general/guides/authorization-guide/#list-of-scopes) we need.\r\nHere's an example of what the URL might look like.\r\nSwap out the `client_id` and scopes for your own.\r\n\r\n```bash\r\nhttps://accounts.spotify.com/authorize?client_id=8e94bde7dd\r\nb84a1f7a0e51bf3bc95be8&response_type=code&redirect_uri=http\r\n%3A%2F%2Flocalhost:3000&scope=user-read-currently-playing%20\r\nuser-top-read\r\n```\r\n\r\nAfter authorizing, you'll be redirected back to your `redirect_uri`.\r\nIn the URL, there's a `code` query parameter. Save this value.\r\n\r\n```bash\r\nhttp://localhost:3000/callback?code=NApCCg..BkWtQ\r\n```\r\n\r\nNext, we'll need to retrieve the refresh token. You'll need to generate a Base 64 encoded string containing the client ID and secret from earlier. You can use [this tool](https://www.base64encode.org/) to encode it online. The format should be `client_id:client_secret`.\r\n\r\n```bash\r\ncurl -H \"Authorization: Basic <base64 encoded client_id:client_secret>\"\r\n-d grant_type=authorization_code -d code=<code> -d redirect_uri=http%3A\r\n%2F%2Flocalhost:3000 https://accounts.spotify.com/api/token\r\n```\r\n\r\nThis will return a JSON response containing a `refresh_token`. This token is [valid indefinitely](https://github.com/spotify/web-api/issues/374) unless you revoke access, so we'll want to save this in an environment variable.\r\n\r\n## Using Spotify's API\r\n\r\nFinally, we can get some real data! Inside Next.js, create three new values in your `.env.local` file.\r\n\r\n```bash\r\nSPOTIFY_CLIENT_ID=\r\nSPOTIFY_CLIENT_SECRET=\r\nSPOTIFY_REFRESH_TOKEN=\r\n```\r\n\r\n**Note:** If you haven't worked with environment variables in Next before, [give this a read first](https://nextjs.org/docs/basic-features/environment-variables).\r\n\r\nWe can now request an access token using our client ID, client secret, and `refresh_token`.\r\n\r\n```js:lib/spotify.js\r\nimport querystring from 'querystring';\r\n\r\nconst client_id = process.env.SPOTIFY_CLIENT_ID;\r\nconst client_secret = process.env.SPOTIFY_CLIENT_SECRET;\r\nconst refresh_token = process.env.SPOTIFY_REFRESH_TOKEN;\r\n\r\nconst basic = Buffer.from(`${client_id}:${client_secret}`).toString('base64');\r\nconst TOKEN_ENDPOINT = `https://accounts.spotify.com/api/token`;\r\n\r\nconst getAccessToken = async () => {\r\n  const response = await fetch(TOKEN_ENDPOINT, {\r\n    method: 'POST',\r\n    headers: {\r\n      Authorization: `Basic ${basic}`,\r\n      'Content-Type': 'application/x-www-form-urlencoded'\r\n    },\r\n    body: querystring.stringify({\r\n      grant_type: 'refresh_token',\r\n      refresh_token\r\n    })\r\n  });\r\n\r\n  return response.json();\r\n};\r\n```\r\n\r\nUse this `access_token` to securely request your top tracks.\r\nThis assumes you added the `user-top-read` scope at the beginning.\r\n\r\n```js:lib/spotify.js\r\nconst TOP_TRACKS_ENDPOINT = `https://api.spotify.com/v1/me/top/tracks`;\r\n\r\nexport const getTopTracks = async () => {\r\n  const { access_token } = await getAccessToken();\r\n\r\n  return fetch(TOP_TRACKS_ENDPOINT, {\r\n    headers: {\r\n      Authorization: `Bearer ${access_token}`\r\n    }\r\n  });\r\n};\r\n```\r\n\r\n### Creating an API Route\r\n\r\nLet's test our communication with Spotify.\r\nFirst, create a new file at `pages/api/top-tracks.js`.\r\nThen, import the new function `getTopTracks`.\r\n\r\n```js:pages/api/top-tracks.js\r\nimport { getTopTracks } from '../../lib/spotify';\r\n\r\nexport default async (_, res) => {\r\n  const response = await getTopTracks();\r\n  const { items } = await response.json();\r\n\r\n  const tracks = items.slice(0, 10).map((track) => ({\r\n    artist: track.artists.map((_artist) => _artist.name).join(', '),\r\n    songUrl: track.external_urls.spotify,\r\n    title: track.name\r\n  }));\r\n\r\n  return res.status(200).json({ tracks });\r\n};\r\n```\r\n\r\nThis will return the first ten top tracks, formatted to remove unnecessary information.\r\nFeel free to modify this as you see fit.\r\nIf everything worked correctly, you should see some data like this after running `next dev`.\r\n\r\n```json\r\n// https://leerob.io/api/top-tracks\r\n\r\n{\r\n  \"tracks\": [\r\n    {\r\n      \"artist\": \"Jamie xx\",\r\n      \"songUrl\": \"https://open.spotify.com/track/77Ezu3tBE7gmzQ4mRnZZUf\",\r\n      \"title\": \"The Rest Is Noise\"\r\n    },\r\n    {\r\n      \"artist\": \"Surfaces\",\r\n      \"songUrl\": \"https://open.spotify.com/track/0NjSiGW8b5HYFfjdCbZzbg\",\r\n      \"title\": \"Horizons\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n## Example\r\n\r\nYou can view an example on my [dashboard](/dashboard).\r\nThe source code is available [here](https://github.com/leerob/leerob.io/blob/master/lib/spotify.ts).\r\n",
    "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},o=(a,e,s,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>e[c],enumerable:!(l=h(e,c))||l.enumerable});return a};var y=(a,e,s)=>(s=a!=null?d(u(a)):{},o(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>o(t({},\"__esModule\",{value:!0}),a);var i=k((I,r)=>{r.exports=_jsx_runtime});var _={};g(_,{default:()=>v,frontmatter:()=>w});var n=y(i()),w={title:\"Using the Spotify API with Next.js\",publishedAt:\"2020-07-21\",summary:\"Learn how to authenticate with the Spotify API to fetch your top tracks in a Next.js API route.\",image:\"/static/images/spotify-api-nextjs/banner.png\"};function p(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",ul:\"ul\",li:\"li\",strong:\"strong\",code:\"code\",em:\"em\",pre:\"pre\",div:\"div\",h3:\"h3\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"One of my favorite parts of my website is my \",(0,n.jsx)(e.a,{href:\"/dashboard\",children:\"dashboard\"}),`.\\r\nIt's a fun, unique way for me to showcase various metrics about my life.\\r\nIt's also a playground for experimenting with new technology and APIs.\\r\nIt currently has integrations with YouTube, Unsplash, Firebase, `,(0,n.jsx)(e.a,{href:\"/snippets/revue\",children:\"Revue\"}),\", GitHub, Gumroad, and now Spotify!\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`I wanted to display what song I'm currently listening to, as well as my top tracks.\\r\nTo accomplish this, I'd need to integrate `,(0,n.jsx)(e.a,{href:\"https://developer.spotify.com/documentation/web-api/\",children:\"Spotify's API\"}),\" with Next.js \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/api-routes/introduction\",children:\"API routes\"}),`.\\r\nThis post will be a quick tutorial to get up and running with Spotify.`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"create-an-application\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#create-an-application\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create an Application\"]}),`\n`,(0,n.jsx)(e.p,{children:\"First, we need to create a Spotify application to give us credentials to authenticate with the API.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Go to your \",(0,n.jsx)(e.a,{href:\"https://developer.spotify.com/dashboard/\",children:\"Spotify Developer Dashboard\"}),\" and log in.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Click \",(0,n.jsx)(e.strong,{children:\"Create an App\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Fill out the name and description and click \",(0,n.jsx)(e.strong,{children:\"create\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Click \",(0,n.jsx)(e.strong,{children:\"Show Client Secret\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Save your Client ID and Secret. You'll need these soon.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"Click \",(0,n.jsx)(e.strong,{children:\"Edit Settings\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Add \",(0,n.jsx)(e.code,{children:\"http://localhost:3000\"}),\" as a redirect URI.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"All done! You now have a properly configured Spotify application and the correct credentials to make requests.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"authentication\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#authentication\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Authentication\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There are a variety of ways to authenticate with the Spotify API, depending on your application. Since we only need permission granted \",(0,n.jsx)(e.em,{children:\"once\"}),\", we'll use the \",(0,n.jsx)(e.a,{href:\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow\",children:\"Authorization Code Flow\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"First, we'll have our application request authorization by logging in with whatever \",(0,n.jsx)(e.a,{href:\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#list-of-scopes\",children:\"scopes\"}),` we need.\\r\nHere's an example of what the URL might look like.\\r\nSwap out the `,(0,n.jsx)(e.code,{children:\"client_id\"}),\" and scopes for your own.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"https://accounts.spotify.com/authorize?client_id\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`8e94bde7dd\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"b84a1f7a0e51bf3bc95be8\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"response_type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"redirect_uri\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`http\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"%3A%2F%2Flocalhost:3000\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"scope\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`user-read-currently-playing%20\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`user-top-read\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"After authorizing, you'll be redirected back to your \",(0,n.jsx)(e.code,{children:\"redirect_uri\"}),`.\\r\nIn the URL, there's a `,(0,n.jsx)(e.code,{children:\"code\"}),\" query parameter. Save this value.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"http://localhost:3000/callback?code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"NApCCg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`BkWtQ\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next, we'll need to retrieve the refresh token. You'll need to generate a Base 64 encoded string containing the client ID and secret from earlier. You can use \",(0,n.jsx)(e.a,{href:\"https://www.base64encode.org/\",children:\"this tool\"}),\" to encode it online. The format should be \",(0,n.jsx)(e.code,{children:\"client_id:client_secret\"}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"curl\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-H\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Authorization: Basic <base64 encoded client_id:client_secret>\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-d\"}),\" \",(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"grant_type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"authorization_code \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-d\"}),\" \",(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"code\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-d\"}),\" \",(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"redirect_uri\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`http%3A\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`%2F%2Flocalhost:3000 https://accounts.spotify.com/api/token\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This will return a JSON response containing a \",(0,n.jsx)(e.code,{children:\"refresh_token\"}),\". This token is \",(0,n.jsx)(e.a,{href:\"https://github.com/spotify/web-api/issues/374\",children:\"valid indefinitely\"}),\" unless you revoke access, so we'll want to save this in an environment variable.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"using-spotifys-api\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#using-spotifys-api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using Spotify's API\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Finally, we can get some real data! Inside Next.js, create three new values in your \",(0,n.jsx)(e.code,{children:\".env.local\"}),\" file.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"SPOTIFY_CLIENT_ID\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"SPOTIFY_CLIENT_SECRET\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"SPOTIFY_REFRESH_TOKEN\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Note:\"}),\" If you haven't worked with environment variables in Next before, \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/basic-features/environment-variables\",children:\"give this a read first\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"We can now request an access token using our client ID, client secret, and \",(0,n.jsx)(e.code,{children:\"refresh_token\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"lib/spotify.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:\"querystring\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'querystring'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" client_id \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"env\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"SPOTIFY_CLIENT_ID\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" client_secret \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"env\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"SPOTIFY_CLIENT_SECRET\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" refresh_token \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"env\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"SPOTIFY_REFRESH_TOKEN\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" basic \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Buffer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"client_id\",(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\":\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"client_secret\",(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'base64'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"TOKEN_ENDPOINT\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"https://accounts.spotify.com/api/token\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"getAccessToken\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" response \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fetch\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"TOKEN_ENDPOINT\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"method\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'POST'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"headers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"Authorization\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"Basic \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"basic\",(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string-property property\",children:\"'Content-Type'\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'application/x-www-form-urlencoded'\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" querystring\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"stringify\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"grant_type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'refresh_token'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      refresh_token\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Use this \",(0,n.jsx)(e.code,{children:\"access_token\"}),` to securely request your top tracks.\\r\nThis assumes you added the `,(0,n.jsx)(e.code,{children:\"user-top-read\"}),\" scope at the beginning.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"lib/spotify.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"TOP_TRACKS_ENDPOINT\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"https://api.spotify.com/v1/me/top/tracks\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"getTopTracks\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" access_token \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getAccessToken\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fetch\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"TOP_TRACKS_ENDPOINT\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"headers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"Authorization\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"Bearer \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"access_token\",(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"creating-an-api-route\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#creating-an-api-route\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating an API Route\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`Let's test our communication with Spotify.\\r\nFirst, create a new file at `,(0,n.jsx)(e.code,{children:\"pages/api/top-tracks.js\"}),`.\\r\nThen, import the new function `,(0,n.jsx)(e.code,{children:\"getTopTracks\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"pages/api/top-tracks.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" getTopTracks \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../lib/spotify'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"_\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" response \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getTopTracks\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" items \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" tracks \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" items\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"slice\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"track\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"artist\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" track\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"artists\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"_artist\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" _artist\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"join\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"', '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"songUrl\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" track\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"external_urls\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"spotify\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"title\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" track\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"status\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"200\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tracks \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[`This will return the first ten top tracks, formatted to remove unnecessary information.\\r\nFeel free to modify this as you see fit.\\r\nIf everything worked correctly, you should see some data like this after running `,(0,n.jsx)(e.code,{children:\"next dev\"}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"language-json code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// https://leerob.io/api/top-tracks\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"tracks\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"artist\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Jamie xx\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"songUrl\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"https://open.spotify.com/track/77Ezu3tBE7gmzQ4mRnZZUf\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"title\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"The Rest Is Noise\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"artist\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Surfaces\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"songUrl\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"https://open.spotify.com/track/0NjSiGW8b5HYFfjdCbZzbg\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"title\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Horizons\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"example\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#example\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Example\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can view an example on my \",(0,n.jsx)(e.a,{href:\"/dashboard\",children:\"dashboard\"}),`.\\r\nThe source code is available `,(0,n.jsx)(e.a,{href:\"https://github.com/leerob/leerob.io/blob/master/lib/spotify.ts\",children:\"here\"}),\".\"]})]})}function b(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var v=b;return f(_);})();\n;return Component;"
  },
  "_id": "blog/spotify-api-nextjs.mdx",
  "_raw": {
    "sourceFilePath": "blog/spotify-api-nextjs.mdx",
    "sourceFileName": "spotify-api-nextjs.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/spotify-api-nextjs"
  },
  "type": "Blog",
  "readingTime": {
    "text": "4 min read",
    "minutes": 3.415,
    "time": 204900,
    "words": 683
  },
  "wordCount": 685,
  "tweetIds": [],
  "slug": "spotify-api-nextjs"
}