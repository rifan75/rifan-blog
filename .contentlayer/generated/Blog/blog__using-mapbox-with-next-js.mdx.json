{
  "title": "Using Mapbox with Next.js (Instead of Google Maps)",
  "publishedAt": "2019-01-13",
  "summary": "Learn how to use Mapbox with Next.js to create a non-SSR map component that is free up to 50,000 map views per month.",
  "image": "/static/images/using-mapbox-with-next-js/banner.png",
  "body": {
    "raw": "\r\nIn the process of selecting a mapping library for [dsmtech.io](https://dsmtech.io), I ran into a\r\nnumber of roadblocks. First and foremost, Google Maps has **drastically** changed their [pricing structure](https://cloud.google.com/maps-platform/user-guide/pricing-changes/).\r\n\r\n> \"On June 11, 2018, we launched new Maps, Routes and Places functionality, which changes the way certain APIs and features are billed. Then on July 16, 2018, all API and feature prices changed to align with our pricing table.\"\r\n\r\nAs you can imagine, a lot of people [are upset](http://geoawesomeness.com/developers-up-in-arms-over-google-maps-api-insane-price-hike/). In the past 6 months, I've stumbled onto a lot of projects that were\r\nusing Google Maps that no longer work. This really puts a hindrance on side projects. Thus, I needed a different solution for my mapping library.\r\n\r\n## Mapbox\r\n\r\nUltimately, I decided to use [Mapbox](https://www.mapbox.com/).\r\n\r\n- It uses [OpenStreetMap](https://www.openstreetmap.org/) under the hood, which is [open-source](/blog/why-i-create-open-source-software).\r\n- It has simple pay-as-you-go pricing.\r\n- It's free up to _50,000 map views per month_.\r\n\r\n<Image\r\n  alt={`Mapbox Pricing`}\r\n  src={`/static/images/using-mapbox-with-next-js/mapbox-pricing.png`}\r\n  width={817}\r\n  height={339}\r\n/>\r\n\r\n## Next.js\r\n\r\nI love [Next.js](https://nextjs.org/). This blog is actually [written with it](https://github.com/leerob/leerob.io). If you've never\r\nheard of Next, here are some of the big wins for me.\r\n\r\n- Automatic transpilation and bundling (with [Webpack](https://webpack.js.org/) and [Babel](https://babeljs.io/)).\r\n- Automatic code splitting.\r\n- Hot code reloading.\r\n- Server-side rendering ([SSR](https://medium.com/@benjburkholder/javascript-seo-server-side-rendering-vs-client-side-rendering-bc06b8ca2383)) out of the box.\r\n- Static file serving.\r\n\r\nIf that sounds awesome, follow their [quick-start guide](https://nextjs.org/docs/) to get an application up and running.\r\nFor now, let's assume you already have your Next application working.\r\n\r\n_**Just want the code?** You can view a working example [here](https://next-mapbox-demo.now.sh) and the code [here](https://github.com/leerob/next-mapbox-demo)._\r\n\r\n## Mapbox + Next.js\r\n\r\nWe'll take advantage of the wonderful [react-map-gl](https://github.com/visgl/react-map-gl) library created by Uber.\r\n\r\n```bash\r\nyarn add react-map-gl\r\n```\r\n\r\nNow, let's create a simple Map component at `components/Map.js`.\r\n\r\n```jsx\r\nimport { Component } from 'react';\r\nimport ReactMapGL from 'react-map-gl';\r\n\r\nclass Map extends Component {\r\n  state = {\r\n    viewport: {\r\n      width: '100vw',\r\n      height: '100vh',\r\n      latitude: 41.5868,\r\n      longitude: -93.625,\r\n      zoom: 13\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ReactMapGL\r\n        mapStyle=\"mapbox://styles/mapbox/streets-v9\"\r\n        mapboxApiAccessToken=\"YOUR_MAPBOX_TOKEN_HERE\"\r\n        onViewportChange={(viewport) => this.setState({ viewport })}\r\n        {...this.state.viewport}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Map;\r\n```\r\n\r\n**Note:** You will need to create a Mapbox account and generate a [token](https://github.com/uber/react-map-gl#about-mapbox-tokens).\r\n\r\nMapbox uses the global `window` object under the hood, which means it can't be server-side rendered. Thus, we need to make some modifications to get things working.\r\n\r\nNext now supports [dynamic imports](https://nextjs.org/docs/#dynamic-import), which make it easy to selectively render components\r\non the client-side. Let's modify our `pages/index.js` file, or whichever route you want to render the `Map` component.\r\n\r\n```jsx\r\nimport dynamic from 'next/dynamic';\r\n\r\nconst DynamicComponentWithNoSSR = dynamic(() => import('../components/Map'), {\r\n  ssr: false\r\n});\r\n\r\nexport default () => <DynamicComponentWithNoSSR />;\r\n```\r\n\r\nFinally, you'll need to include the Mapbox CSS file in your application. You can do this in a variety of ways.\r\nI chose to override `_app.js` and include it in the `<head>` [like so](https://github.com/leerob/next-mapbox-demo/blob/master/pages/_app.js#L29).\r\n\r\n```jsx\r\n<link\r\n  href=\"https://api.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css\"\r\n  rel=\"stylesheet\"\r\n/>\r\n```\r\n\r\nAt this point, you should be able to run `yarn dev` (which runs `next`) to see the map working.\r\n\r\n<Image\r\n  alt={`Mapbox Demo with Next.js`}\r\n  src={`/static/images/using-mapbox-with-next-js/map.png`}\r\n  width={1000}\r\n  height={645}\r\n/>\r\n\r\n## Going Further\r\n\r\nOkay, we've got a map. Now what? Here are some other ideas for going further.\r\n\r\n- When importing dynamic components, you can supply a [loading placeholder](https://nextjs.org/docs/#2-with-custom-loading-component). [Here's an example](/blog/loading-placeholder-with-sass) of one you could create.\r\n- You can use [Marker](https://uber.github.io/react-map-gl/#/Documentation/api-reference/marker) from `react-map-gl` to place items on the map.\r\n",
    "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},o=(a,e,s,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>e[c],enumerable:!(l=h(e,c))||l.enumerable});return a};var b=(a,e,s)=>(s=a!=null?d(u(a)):{},o(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=>o(t({},\"__esModule\",{value:!0}),a);var i=k((I,r)=>{r.exports=_jsx_runtime});var v={};g(v,{default:()=>x,frontmatter:()=>f});var n=b(i()),f={title:\"Using Mapbox with Next.js (Instead of Google Maps)\",publishedAt:\"2019-01-13\",summary:\"Learn how to use Mapbox with Next.js to create a non-SSR map component that is free up to 50,000 map views per month.\",image:\"/static/images/using-mapbox-with-next-js/banner.png\"};function p(a){let e=Object.assign({p:\"p\",a:\"a\",strong:\"strong\",blockquote:\"blockquote\",h2:\"h2\",span:\"span\",ul:\"ul\",li:\"li\",em:\"em\",pre:\"pre\",code:\"code\"},a.components),{Image:s}=e;return s||j(\"Image\",!0,\"24:1-29:3\"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In the process of selecting a mapping library for \",(0,n.jsx)(e.a,{href:\"https://dsmtech.io\",children:\"dsmtech.io\"}),`, I ran into a\\r\nnumber of roadblocks. First and foremost, Google Maps has `,(0,n.jsx)(e.strong,{children:\"drastically\"}),\" changed their \",(0,n.jsx)(e.a,{href:\"https://cloud.google.com/maps-platform/user-guide/pricing-changes/\",children:\"pricing structure\"}),\".\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:'\"On June 11, 2018, we launched new Maps, Routes and Places functionality, which changes the way certain APIs and features are billed. Then on July 16, 2018, all API and feature prices changed to align with our pricing table.\"'}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"As you can imagine, a lot of people \",(0,n.jsx)(e.a,{href:\"http://geoawesomeness.com/developers-up-in-arms-over-google-maps-api-insane-price-hike/\",children:\"are upset\"}),`. In the past 6 months, I've stumbled onto a lot of projects that were\\r\nusing Google Maps that no longer work. This really puts a hindrance on side projects. Thus, I needed a different solution for my mapping library.`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"mapbox\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#mapbox\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Mapbox\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Ultimately, I decided to use \",(0,n.jsx)(e.a,{href:\"https://www.mapbox.com/\",children:\"Mapbox\"}),\".\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"It uses \",(0,n.jsx)(e.a,{href:\"https://www.openstreetmap.org/\",children:\"OpenStreetMap\"}),\" under the hood, which is \",(0,n.jsx)(e.a,{href:\"/blog/why-i-create-open-source-software\",children:\"open-source\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"It has simple pay-as-you-go pricing.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"It's free up to \",(0,n.jsx)(e.em,{children:\"50,000 map views per month\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsx)(s,{alt:\"Mapbox Pricing\",src:\"/static/images/using-mapbox-with-next-js/mapbox-pricing.png\",width:817,height:339}),`\n`,(0,n.jsxs)(e.h2,{id:\"nextjs\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#nextjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Next.js\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I love \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/\",children:\"Next.js\"}),\". This blog is actually \",(0,n.jsx)(e.a,{href:\"https://github.com/leerob/leerob.io\",children:\"written with it\"}),`. If you've never\\r\nheard of Next, here are some of the big wins for me.`]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Automatic transpilation and bundling (with \",(0,n.jsx)(e.a,{href:\"https://webpack.js.org/\",children:\"Webpack\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://babeljs.io/\",children:\"Babel\"}),\").\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Automatic code splitting.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Hot code reloading.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"Server-side rendering (\",(0,n.jsx)(e.a,{href:\"https://medium.com/@benjburkholder/javascript-seo-server-side-rendering-vs-client-side-rendering-bc06b8ca2383\",children:\"SSR\"}),\") out of the box.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Static file serving.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If that sounds awesome, follow their \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/\",children:\"quick-start guide\"}),` to get an application up and running.\\r\nFor now, let's assume you already have your Next application working.`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.em,{children:[(0,n.jsx)(e.strong,{children:\"Just want the code?\"}),\" You can view a working example \",(0,n.jsx)(e.a,{href:\"https://next-mapbox-demo.now.sh\",children:\"here\"}),\" and the code \",(0,n.jsx)(e.a,{href:\"https://github.com/leerob/next-mapbox-demo\",children:\"here\"}),\".\"]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"mapbox--nextjs\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#mapbox--nextjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Mapbox + Next.js\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"We'll take advantage of the wonderful \",(0,n.jsx)(e.a,{href:\"https://github.com/visgl/react-map-gl\",children:\"react-map-gl\"}),\" library created by Uber.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"yarn\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"add\"}),` react-map-gl\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now, let's create a simple Map component at \",(0,n.jsx)(e.code,{children:\"components/Map.js\"}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-jsx\",children:(0,n.jsxs)(e.code,{className:\"language-jsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Component\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ReactMapGL\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-map-gl'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Map\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Component\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  state \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"viewport\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"width\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'100vw'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"height\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'100vh'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"latitude\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"41.5868\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"longitude\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"93.625\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"zoom\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"13\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ReactMapGL\"})]}),`\\r\n`]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"mapStyle\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"mapbox://styles/mapbox/streets-v9\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\\r\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"mapboxApiAccessToken\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"YOUR_MAPBOX_TOKEN_HERE\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\\r\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"onViewportChange\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"viewport\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"setState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" viewport \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),`\\r\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"        \",(0,n.jsxs)(e.span,{className:\"token spread\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"state\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"viewport\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),`\\r\n`]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"Map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Note:\"}),\" You will need to create a Mapbox account and generate a \",(0,n.jsx)(e.a,{href:\"https://github.com/uber/react-map-gl#about-mapbox-tokens\",children:\"token\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Mapbox uses the global \",(0,n.jsx)(e.code,{children:\"window\"}),\" object under the hood, which means it can't be server-side rendered. Thus, we need to make some modifications to get things working.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next now supports \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/#dynamic-import\",children:\"dynamic imports\"}),`, which make it easy to selectively render components\\r\non the client-side. Let's modify our `,(0,n.jsx)(e.code,{children:\"pages/index.js\"}),\" file, or whichever route you want to render the \",(0,n.jsx)(e.code,{children:\"Map\"}),\" component.\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-jsx\",children:(0,n.jsxs)(e.code,{className:\"language-jsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:\"dynamic\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'next/dynamic'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"DynamicComponentWithNoSSR\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dynamic\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'../components/Map'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"ssr\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"DynamicComponentWithNoSSR\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[`Finally, you'll need to include the Mapbox CSS file in your application. You can do this in a variety of ways.\\r\nI chose to override `,(0,n.jsx)(e.code,{children:\"_app.js\"}),\" and include it in the \",(0,n.jsx)(e.code,{children:\"<head>\"}),\" \",(0,n.jsx)(e.a,{href:\"https://github.com/leerob/next-mapbox-demo/blob/master/pages/_app.js#L29\",children:\"like so\"}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-jsx\",children:(0,n.jsxs)(e.code,{className:\"language-jsx code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"link\"]}),`\\r\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"href\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"https://api.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\\r\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token tag\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"rel\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"stylesheet\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),`\\r\n`]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"At this point, you should be able to run \",(0,n.jsx)(e.code,{children:\"yarn dev\"}),\" (which runs \",(0,n.jsx)(e.code,{children:\"next\"}),\") to see the map working.\"]}),`\n`,(0,n.jsx)(s,{alt:\"Mapbox Demo with Next.js\",src:\"/static/images/using-mapbox-with-next-js/map.png\",width:1e3,height:645}),`\n`,(0,n.jsxs)(e.h2,{id:\"going-further\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#going-further\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Going Further\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Okay, we've got a map. Now what? Here are some other ideas for going further.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"When importing dynamic components, you can supply a \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/#2-with-custom-loading-component\",children:\"loading placeholder\"}),\". \",(0,n.jsx)(e.a,{href:\"/blog/loading-placeholder-with-sass\",children:\"Here's an example\"}),\" of one you could create.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"You can use \",(0,n.jsx)(e.a,{href:\"https://uber.github.io/react-map-gl/#/Documentation/api-reference/marker\",children:\"Marker\"}),\" from \",(0,n.jsx)(e.code,{children:\"react-map-gl\"}),\" to place items on the map.\"]}),`\n`]})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var x=y;function j(a,e,s){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `D:\\\\Linux_Share\\\\reactapp\\\\rifan-blog\\\\data\\\\blog\\\\_mdx_bundler_entry_point-ae6f4ed2-bba7-43f6-b974-6c313abbc70c.mdx`\":\"\"))}return w(v);})();\n;return Component;"
  },
  "_id": "blog/using-mapbox-with-next-js.mdx",
  "_raw": {
    "sourceFilePath": "blog/using-mapbox-with-next-js.mdx",
    "sourceFileName": "using-mapbox-with-next-js.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/using-mapbox-with-next-js"
  },
  "type": "Blog",
  "readingTime": {
    "text": "3 min read",
    "minutes": 2.745,
    "time": 164700,
    "words": 549
  },
  "wordCount": 551,
  "tweetIds": [],
  "slug": "using-mapbox-with-next-js"
}