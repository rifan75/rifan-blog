{
  "title": "Create A Newsletter with Next.js API Routes and Mailchimp",
  "publishedAt": "2019-11-10",
  "summary": "Learn how to integrate Next.js and React with Mailchimp to build a newsletter subscription form.",
  "image": "/static/images/mailchimp-next-js/banner.png",
  "body": {
    "raw": "\r\n<Image\r\n  alt={`Next.js and Mailchimp`}\r\n  src={`/static/images/mailchimp-next-js/banner.png`}\r\n  width={1500}\r\n  height={857}\r\n  priority\r\n/>\r\n\r\n_The year is 2030. Everyone has a newsletter. Email has overtaken social media. 95% of coding is done via drag-and-drop tools._\r\n\r\nOkay, most of that probably isn't true. Except the [no-code tools](https://webflow.com/).\r\nUnless you've been living under a rock, you've probably noticed the rise of newsletters (especially in the developer community).\r\n\r\n_Why?_ Well, they're an excellent way to promote content to those who really want to read it. If you've ever thought about starting a newsletter, then you've found the right article ðŸŽ‰\r\n\r\n## Mailchimp vs. The World\r\n\r\nIf you're just starting a newsletter, you probably want something with a free tier.\r\nThat was my rationale for adopting [TinyLetter](https://tinyletter.com/). It was simple, easy to set up, and didn't require an API route. Perfect!\r\n\r\nHowever, it wasn't exactly a frictionless sign-up process. When a user clicked \"subscribe\", it launched a pop-up window where they had to confirm their email address again.\r\nAgain, _it works_, but we can do better.\r\n\r\nI started to explore using [Mailchimp](https://mailchimp.com/) as an alternative. It also has a [free tier](https://mailchimp.com/pricing/) if you have less than 2,000 subscribers. Perfect.\r\n\r\n## Why Next.js?\r\n\r\n[Next.js](https://nextjs.org/) is the easiest way to build applications in React. One of my favorite features is API routes.\r\n\r\nAPI routes provide a solution for building a complete API inside Next.js.\r\nAll you need to get started is an `api/` folder inside your main `pages/` folder where your routes live.\r\n\r\nEvery file inside `pages/api/` is mapped to `/api/*`. This is where we'll communicate with Mailchimp.\r\nFirst, we need to set up an account.\r\n\r\n## Setting up Mailchimp\r\n\r\nAfter [creating an account](https://mailchimp.com/help/create-an-account/), you'll need to fetch your [API key](https://mailchimp.com/help/about-api-keys/#find+or+generate+your+api+key).\r\n\r\nWhen a user clicks \"subscribe\", we'll want to add their email address to our [audience](https://mailchimp.com/developer/marketing/guides/create-your-first-audience/#add-a-contact-to-an-audience).\r\nWe'll need to grab a few values:\r\n\r\n- The [API server region](https://mailchimp.com/developer/marketing/guides/quick-start/#make-your-first-api-call) (e.g. `us1`).\r\n- The [Audience ID](https://mailchimp.com/help/find-audience-id/) for the mailing list.\r\n\r\n## Environment Variables\r\n\r\nLet's make our secrets we've retrieved available without hardcoding them into our request. Since I'm deploying with [Vercel](https://vercel.com), I'll need to set up some [environment variables](https://nextjs.org/docs/basic-features/environment-variables).\r\nFirst, let's create `.env.local` for testing locally.\r\n\r\n```bash:.env.local\r\nMAILCHIMP_API_KEY=\r\nMAILCHIMP_API_SERVER=\r\nMAILCHIMP_AUDIENCE_ID=\r\n```\r\n\r\nFinally, [add these environment variables in Vercel](https://vercel.com/docs/environment-variables) so they're available on pull requests (Preview) and in Production.\r\n\r\n**Note:** Don't forget to add `.env.local` to your `.gitignore`. We don't want to commit our secrets.\r\n\r\n## Creating The Request\r\n\r\nNow that we have our values available as environment variables, we can create an API route at `pages/api/subscribe.js` to add a member to our list.\r\nMake sure you install the `@mailchimp/mailchimp_marketing` library.\r\n\r\n```js:pages/api/subscribe.js\r\nimport mailchimp from '@mailchimp/mailchimp_marketing';\r\n\r\nmailchimp.setConfig({\r\n  apiKey: process.env.MAILCHIMP_API_KEY,\r\n  server: process.env.MAILCHIMP_API_SERVER // e.g. us1\r\n});\r\n\r\nexport default async (req, res) => {\r\n  const { email } = req.body;\r\n\r\n  if (!email) {\r\n    return res.status(400).json({ error: 'Email is required' });\r\n  }\r\n\r\n  try {\r\n    await mailchimp.lists.addListMember(process.env.MAILCHIMP_AUDIENCE_ID, {\r\n      email_address: email,\r\n      status: 'subscribed'\r\n    });\r\n\r\n    return res.status(201).json({ error: '' });\r\n  } catch (error) {\r\n    return res.status(500).json({ error: error.message || error.toString() });\r\n  }\r\n};\r\n```\r\n\r\n## Creating A Form Input\r\n\r\nNow that our API is created, we need a way to gather user input. Let's create a component to send a request to our API.\r\n\r\n```js:components/Subscribe.js\r\nimport React, { useRef, useState } from 'react';\r\n\r\nfunction Subscribe() {\r\n  // 1. Create a reference to the input so we can fetch/clear it's value.\r\n  const inputEl = useRef(null);\r\n  // 2. Hold a message in state to handle the response from our API.\r\n  const [message, setMessage] = useState('');\r\n\r\n  const subscribe = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // 3. Send a request to our API with the user's email address.\r\n    const res = await fetch('/api/subscribe', {\r\n      body: JSON.stringify({\r\n        email: inputEl.current.value\r\n      }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST'\r\n    });\r\n\r\n    const { error } = await res.json();\r\n\r\n    if (error) {\r\n      // 4. If there was an error, update the message in state.\r\n      setMessage(error);\r\n\r\n      return;\r\n    }\r\n\r\n    // 5. Clear the input value and show a success message.\r\n    inputEl.current.value = '';\r\n    setMessage('Success! ðŸŽ‰ You are now subscribed to the newsletter.');\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={subscribe}>\r\n      <label htmlFor=\"email-input\">{'Email Address'}</label>\r\n      <input\r\n        id=\"email-input\"\r\n        name=\"email\"\r\n        placeholder=\"you@awesome.com\"\r\n        ref={inputEl}\r\n        required\r\n        type=\"email\"\r\n      />\r\n      <div>\r\n        {message\r\n          ? message\r\n          : `I'll only send emails when new content is posted. No spam.`}\r\n      </div>\r\n      <button type=\"submit\">{'âœ¨ Subscribe ðŸ’Œ'}</button>\r\n    </form>\r\n  );\r\n}\r\n```\r\n\r\n## Conclusion\r\n\r\nIf you'd like to see a completed example, the entire source code for my blog is [open source](https://github.com/leerob/leerob.io/blob/bfbd33a822fbcbbafd4027aa45884446f6f8ff3c/pages/api/subscribe.js).\r\n\r\nCurious if it actually works? Try out the form below ðŸ˜‰\r\n",
    "code": "var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!N.call(a,c)&&c!==s&&l(a,c,{get:()=>e[c],enumerable:!(t=h(e,c))||t.enumerable});return a};var f=(a,e,s)=>(s=a!=null?d(u(a)):{},r(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),g=a=>r(l({},\"__esModule\",{value:!0}),a);var i=k((A,o)=>{o.exports=_jsx_runtime});var j={};y(j,{default:()=>v,frontmatter:()=>w});var n=f(i()),w={title:\"Create A Newsletter with Next.js API Routes and Mailchimp\",publishedAt:\"2019-11-10\",summary:\"Learn how to integrate Next.js and React with Mailchimp to build a newsletter subscription form.\",image:\"/static/images/mailchimp-next-js/banner.png\"};function p(a){let e=Object.assign({p:\"p\",em:\"em\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",ul:\"ul\",li:\"li\",div:\"div\",pre:\"pre\",strong:\"strong\"},a.components),{Image:s}=e;return s||I(\"Image\",!0,\"8:1-14:3\"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s,{alt:\"Next.js and Mailchimp\",src:\"/static/images/mailchimp-next-js/banner.png\",width:1500,height:857,priority:!0}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"The year is 2030. Everyone has a newsletter. Email has overtaken social media. 95% of coding is done via drag-and-drop tools.\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Okay, most of that probably isn't true. Except the \",(0,n.jsx)(e.a,{href:\"https://webflow.com/\",children:\"no-code tools\"}),`.\\r\nUnless you've been living under a rock, you've probably noticed the rise of newsletters (especially in the developer community).`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"Why?\"}),\" Well, they're an excellent way to promote content to those who really want to read it. If you've ever thought about starting a newsletter, then you've found the right article \\u{1F389}\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"mailchimp-vs-the-world\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#mailchimp-vs-the-world\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Mailchimp vs. The World\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`If you're just starting a newsletter, you probably want something with a free tier.\\r\nThat was my rationale for adopting `,(0,n.jsx)(e.a,{href:\"https://tinyletter.com/\",children:\"TinyLetter\"}),\". It was simple, easy to set up, and didn't require an API route. Perfect!\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`However, it wasn't exactly a frictionless sign-up process. When a user clicked \"subscribe\", it launched a pop-up window where they had to confirm their email address again.\\r\nAgain, `,(0,n.jsx)(e.em,{children:\"it works\"}),\", but we can do better.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I started to explore using \",(0,n.jsx)(e.a,{href:\"https://mailchimp.com/\",children:\"Mailchimp\"}),\" as an alternative. It also has a \",(0,n.jsx)(e.a,{href:\"https://mailchimp.com/pricing/\",children:\"free tier\"}),\" if you have less than 2,000 subscribers. Perfect.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"why-nextjs\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#why-nextjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Why Next.js?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nextjs.org/\",children:\"Next.js\"}),\" is the easiest way to build applications in React. One of my favorite features is API routes.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`API routes provide a solution for building a complete API inside Next.js.\\r\nAll you need to get started is an `,(0,n.jsx)(e.code,{children:\"api/\"}),\" folder inside your main \",(0,n.jsx)(e.code,{children:\"pages/\"}),\" folder where your routes live.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Every file inside \",(0,n.jsx)(e.code,{children:\"pages/api/\"}),\" is mapped to \",(0,n.jsx)(e.code,{children:\"/api/*\"}),`. This is where we'll communicate with Mailchimp.\\r\nFirst, we need to set up an account.`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"setting-up-mailchimp\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#setting-up-mailchimp\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Setting up Mailchimp\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"After \",(0,n.jsx)(e.a,{href:\"https://mailchimp.com/help/create-an-account/\",children:\"creating an account\"}),\", you'll need to fetch your \",(0,n.jsx)(e.a,{href:\"https://mailchimp.com/help/about-api-keys/#find+or+generate+your+api+key\",children:\"API key\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`When a user clicks \"subscribe\", we'll want to add their email address to our `,(0,n.jsx)(e.a,{href:\"https://mailchimp.com/developer/marketing/guides/create-your-first-audience/#add-a-contact-to-an-audience\",children:\"audience\"}),`.\\r\nWe'll need to grab a few values:`]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://mailchimp.com/developer/marketing/guides/quick-start/#make-your-first-api-call\",children:\"API server region\"}),\" (e.g. \",(0,n.jsx)(e.code,{children:\"us1\"}),\").\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://mailchimp.com/help/find-audience-id/\",children:\"Audience ID\"}),\" for the mailing list.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"environment-variables\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#environment-variables\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Environment Variables\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let's make our secrets we've retrieved available without hardcoding them into our request. Since I'm deploying with \",(0,n.jsx)(e.a,{href:\"https://vercel.com\",children:\"Vercel\"}),\", I'll need to set up some \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/basic-features/environment-variables\",children:\"environment variables\"}),`.\\r\nFirst, let's create `,(0,n.jsx)(e.code,{children:\".env.local\"}),\" for testing locally.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\".env.local\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"MAILCHIMP_API_KEY\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"MAILCHIMP_API_SERVER\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token assign-left variable\",children:\"MAILCHIMP_AUDIENCE_ID\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Finally, \",(0,n.jsx)(e.a,{href:\"https://vercel.com/docs/environment-variables\",children:\"add these environment variables in Vercel\"}),\" so they're available on pull requests (Preview) and in Production.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Note:\"}),\" Don't forget to add \",(0,n.jsx)(e.code,{children:\".env.local\"}),\" to your \",(0,n.jsx)(e.code,{children:\".gitignore\"}),\". We don't want to commit our secrets.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"creating-the-request\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#creating-the-request\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating The Request\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now that we have our values available as environment variables, we can create an API route at \",(0,n.jsx)(e.code,{children:\"pages/api/subscribe.js\"}),` to add a member to our list.\\r\nMake sure you install the `,(0,n.jsx)(e.code,{children:\"@mailchimp/mailchimp_marketing\"}),\" library.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"pages/api/subscribe.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:\"mailchimp\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@mailchimp/mailchimp_marketing'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"mailchimp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"setConfig\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"apiKey\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"env\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"MAILCHIMP_API_KEY\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"server\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"env\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"MAILCHIMP_API_SERVER\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// e.g. us1\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" email \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"email\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"status\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"400\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Email is required'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" mailchimp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"lists\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"addListMember\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"env\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"MAILCHIMP_AUDIENCE_ID\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"email_address\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" email\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"status\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'subscribed'\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"status\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"201\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"status\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"500\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" error\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"message\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" error\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"creating-a-form-input\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#creating-a-form-input\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating A Form Input\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that our API is created, we need a way to gather user input. Let's create a component to send a request to our API.\"}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"components/Subscribe.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" useRef\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useState \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Subscribe\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 1. Create a reference to the input so we can fetch/clear it's value.\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" inputEl \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useRef\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword null nil\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 2. Hold a message in state to handle the response from our API.\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"message\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setMessage\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"subscribe\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 3. Send a request to our API with the user's email address.\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" res \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fetch\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/api/subscribe'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"JSON\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"stringify\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"email\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" inputEl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"current\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"headers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string-property property\",children:\"'Content-Type'\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'application/json'\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"method\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'POST'\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" error \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" res\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"json\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 4. If there was an error, update the message in state.\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setMessage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 5. Clear the input value and show a success message.\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    inputEl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"current\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setMessage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Success! \\u{1F389} You are now subscribed to the newsletter.'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"form onSubmit\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"subscribe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"label htmlFor\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"email-input\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Email Address'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"label\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),`input\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        id\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"email-input\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"email\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        placeholder\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"you@awesome.com\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        ref\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"inputEl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        required\\r\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        type\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"email\"'}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"div\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`message\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),` message\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"I'll only send emails when new content is posted. No spam.\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"button type\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"submit\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'\\u2728 Subscribe \\u{1F48C}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"button\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"form\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"conclusion\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#conclusion\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you'd like to see a completed example, the entire source code for my blog is \",(0,n.jsx)(e.a,{href:\"https://github.com/leerob/leerob.io/blob/bfbd33a822fbcbbafd4027aa45884446f6f8ff3c/pages/api/subscribe.js\",children:\"open source\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Curious if it actually works? Try out the form below \\u{1F609}\"})]})}function b(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var v=b;function I(a,e,s){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `D:\\\\Linux_Share\\\\reactapp\\\\rifan-blog\\\\data\\\\blog\\\\_mdx_bundler_entry_point-03674c67-de9a-44a6-a7a1-7097e2cbd467.mdx`\":\"\"))}return g(j);})();\n;return Component;"
  },
  "_id": "blog/mailchimp-next-js.mdx",
  "_raw": {
    "sourceFilePath": "blog/mailchimp-next-js.mdx",
    "sourceFileName": "mailchimp-next-js.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/mailchimp-next-js"
  },
  "type": "Blog",
  "readingTime": {
    "text": "4 min read",
    "minutes": 3.665,
    "time": 219900,
    "words": 733
  },
  "wordCount": 735,
  "tweetIds": [],
  "slug": "mailchimp-next-js"
}