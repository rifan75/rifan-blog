{
  "title": "Create a Dynamic Sitemap with Next.js",
  "publishedAt": "2020-03-02",
  "summary": "Learn how to add a dynamic sitemap to your Next.js project, along with a robots.txt file for optimal SEO.",
  "image": "/static/images/nextjs-sitemap-robots/banner.png",
  "body": {
    "raw": "\r\nTo improve your Search Engine Optimization (SEO), you might need to add a sitemap or `robots.txt` file to your Next.js site.\r\n\r\nA **sitemap** defines the relationship between pages of your site. Search engines utilize\r\nthis file to more accurately index your site. You can also provide additional information\r\nsuch as last updated time, how frequently the page changes, and more.\r\n\r\nA **robots.txt** file tells search engines which pages or files the crawler can or can't request from your site.\r\n\r\n## Static Sitemaps\r\n\r\nIf your site does not update frequently, you might currently have a static sitemap.\r\nThis is a basic `.xml` file defining the content of your site. Here's a simple example:\r\n\r\n```xml\r\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\r\n  <url>\r\n      <loc>https://leerob.io</loc>\r\n  </url>\r\n  <url>\r\n      <loc>https://leerob.io/blog</loc>\r\n  </url>\r\n</urlset>\r\n```\r\n\r\nAs your site scales, you will probably want to create your sitemap dynamically.\r\n\r\n## Dynamic Sitemaps\r\n\r\nIf your site frequently changes, you should dynamically create a sitemap.\r\nLet's first look at an example where your site content is file-based (e.g., contained inside the `/pages` directory).\r\n\r\nFirst, let's add `globby` so we can fetch a list of routes.\r\n\r\n```bash\r\n$ yarn add --dev globby\r\n```\r\n\r\n> **Note:** `globby` [might not work](https://github.com/leerob/leerob.io/issues/293) on Windows.\r\n\r\nNext, we can create a Node script at `scripts/generate-sitemap.mjs`.\r\nThis file will dynamically build a sitemap based on your `/pages` directory.\r\n\r\n```js\r\nimport { writeFileSync } from 'fs';\r\nimport { globby } from 'globby';\r\nimport prettier from 'prettier';\r\n\r\nasync function generate() {\r\n  const prettierConfig = await prettier.resolveConfig('./.prettierrc.js');\r\n  const pages = await globby([\r\n    'pages/*.js',\r\n    'data/**/*.mdx',\r\n    '!data/*.mdx',\r\n    '!pages/_*.js',\r\n    '!pages/api',\r\n    '!pages/404.js'\r\n  ]);\r\n\r\n  const sitemap = `\r\n    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\r\n        ${pages\r\n          .map((page) => {\r\n            const path = page\r\n              .replace('pages', '')\r\n              .replace('data', '')\r\n              .replace('.js', '')\r\n              .replace('.mdx', '');\r\n            const route = path === '/index' ? '' : path;\r\n\r\n            return `\r\n              <url>\r\n                  <loc>${`https://leerob.io${route}`}</loc>\r\n              </url>\r\n            `;\r\n          })\r\n          .join('')}\r\n    </urlset>\r\n    `;\r\n\r\n  const formatted = prettier.format(sitemap, {\r\n    ...prettierConfig,\r\n    parser: 'html'\r\n  });\r\n\r\n  // eslint-disable-next-line no-sync\r\n  writeFileSync('public/sitemap.xml', formatted);\r\n}\r\n\r\ngenerate();\r\n```\r\n\r\nFinally, add `postbuild` script in your `package.json` to run this script after `next build` completes.\r\nYour generated file gets created at `public/sitemap.xml` which is then accessible from the root of your site.\r\n\r\n```json\r\n{\r\n  \"scripts\": {\r\n    \"build\": \"next build\",\r\n    \"postbuild\": \"node ./scripts/generate-sitemap.mjs\",\r\n    \"dev\": \"next dev\",\r\n    \"start\": \"next start\",\r\n    \"lint\": \"next lint\"\r\n  }\r\n}\r\n```\r\n\r\n## External Content\r\n\r\nIf you have externally hosted data (e.g., a CMS), you'll need to make an API request\r\nbefore you can create your sitemap. This implementation will vary depending on your data source,\r\nbut the idea is the same. To demonstrate, I've created an example using placeholder data.\r\n\r\nFirst, create a new file at `pages/sitemap.xml.js`.\r\n\r\n```js\r\nimport React from 'react';\r\n\r\nclass Sitemap extends React.Component {\r\n  static async getInitialProps({ res }) {\r\n    const request = await fetch(EXTERNAL_DATA_URL);\r\n    const posts = await request.json();\r\n\r\n    res.setHeader('Content-Type', 'text/xml');\r\n    res.write(createSitemap(posts));\r\n    res.end();\r\n  }\r\n}\r\n\r\nexport default Sitemap;\r\n```\r\n\r\nWhen the route `/sitemap.xml` is initially loaded, we will fetch posts from an external data source\r\nand then write an XML file as the response.\r\n\r\n```js\r\nimport React from 'react';\r\n\r\nconst EXTERNAL_DATA_URL = 'https://jsonplaceholder.typicode.com/posts';\r\n\r\nconst createSitemap = (posts) => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n    <urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\r\n        ${posts\r\n          .map(({ id }) => {\r\n            return `\r\n                <url>\r\n                    <loc>${`${EXTERNAL_DATA_URL}/${id}`}</loc>\r\n                </url>\r\n            `;\r\n          })\r\n          .join('')}\r\n    </urlset>\r\n    `;\r\n\r\nclass Sitemap extends React.Component {\r\n  static async getInitialProps({ res }) {\r\n    const request = await fetch(EXTERNAL_DATA_URL);\r\n    const posts = await request.json();\r\n\r\n    res.setHeader('Content-Type', 'text/xml');\r\n    res.write(createSitemap(posts));\r\n    res.end();\r\n  }\r\n}\r\n\r\nexport default Sitemap;\r\n```\r\n\r\nHere's a condensed example of the output.\r\n\r\n```xml\r\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\r\n  <url>\r\n      <loc>https://jsonplaceholder.typicode.com/posts/1</loc>\r\n  </url>\r\n  <url>\r\n      <loc>https://jsonplaceholder.typicode.com/posts/2</loc>\r\n  </url>\r\n</urlset>\r\n```\r\n\r\n## robots.txt\r\n\r\nFinally, we can create a static file at `public/robots.txt` to define which\r\nfiles can be crawled and where the sitemap is located.\r\n\r\n```bash\r\nUser-agent: *\r\nSitemap: https://leerob.io/sitemap.xml\r\n```\r\n",
    "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,l)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!u.call(a,c)&&c!==s&&t(a,c,{get:()=>n[c],enumerable:!(l=m(n,c))||l.enumerable});return a};var y=(a,n,s)=>(s=a!=null?d(N(a)):{},i(n||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=>i(t({},\"__esModule\",{value:!0}),a);var r=k((A,o)=>{o.exports=_jsx_runtime});var j={};g(j,{default:()=>x,frontmatter:()=>f});var e=y(r()),f={title:\"Create a Dynamic Sitemap with Next.js\",publishedAt:\"2020-03-02\",summary:\"Learn how to add a dynamic sitemap to your Next.js project, along with a robots.txt file for optimal SEO.\",image:\"/static/images/nextjs-sitemap-robots/banner.png\"};function p(a){let n=Object.assign({p:\"p\",code:\"code\",strong:\"strong\",h2:\"h2\",a:\"a\",span:\"span\",pre:\"pre\",blockquote:\"blockquote\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"To improve your Search Engine Optimization (SEO), you might need to add a sitemap or \",(0,e.jsx)(n.code,{children:\"robots.txt\"}),\" file to your Next.js site.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"A \",(0,e.jsx)(n.strong,{children:\"sitemap\"}),` defines the relationship between pages of your site. Search engines utilize\\r\nthis file to more accurately index your site. You can also provide additional information\\r\nsuch as last updated time, how frequently the page changes, and more.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"A \",(0,e.jsx)(n.strong,{children:\"robots.txt\"}),\" file tells search engines which pages or files the crawler can or can't request from your site.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"static-sitemaps\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#static-sitemaps\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Static Sitemaps\"]}),`\n`,(0,e.jsxs)(n.p,{children:[`If your site does not update frequently, you might currently have a static sitemap.\\r\nThis is a basic `,(0,e.jsx)(n.code,{children:\".xml\"}),\" file defining the content of your site. Here's a simple example:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-xml\",children:(0,e.jsxs)(n.code,{className:\"language-xml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"urlset\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"xmlns\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"http://www.sitemaps.org/schemas/sitemap/0.9\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"https://leerob.io\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"https://leerob.io/blog\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"urlset\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"As your site scales, you will probably want to create your sitemap dynamically.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"dynamic-sitemaps\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#dynamic-sitemaps\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Dynamic Sitemaps\"]}),`\n`,(0,e.jsxs)(n.p,{children:[`If your site frequently changes, you should dynamically create a sitemap.\\r\nLet's first look at an example where your site content is file-based (e.g., contained inside the `,(0,e.jsx)(n.code,{children:\"/pages\"}),\" directory).\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"First, let's add \",(0,e.jsx)(n.code,{children:\"globby\"}),\" so we can fetch a list of routes.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"yarn\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"add\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"--dev\"}),` globby\n`]})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Note:\"}),\" \",(0,e.jsx)(n.code,{children:\"globby\"}),\" \",(0,e.jsx)(n.a,{href:\"https://github.com/leerob/leerob.io/issues/293\",children:\"might not work\"}),\" on Windows.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Next, we can create a Node script at \",(0,e.jsx)(n.code,{children:\"scripts/generate-sitemap.mjs\"}),`.\\r\nThis file will dynamically build a sitemap based on your `,(0,e.jsx)(n.code,{children:\"/pages\"}),\" directory.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" writeFileSync \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'fs'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" globby \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'globby'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:\"prettier\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'prettier'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"generate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" prettierConfig \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" prettier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"resolveConfig\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./.prettierrc.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" pages \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"globby\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pages/*.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'data/**/*.mdx'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'!data/*.mdx'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'!pages/_*.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'!pages/api'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'!pages/404.js'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" sitemap \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`\\r\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`    <?xml version=\"1.0\" encoding=\"UTF-8\"?>\\r\n`})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`    <urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\\r\n`})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"        \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),`pages\\r\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"page\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" path \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` page\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'pages'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'data'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'.mdx'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" route \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" path \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/index'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" path\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:`\\r\n`})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`\\r\n`})]})]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`              <url>\\r\n`})})})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"                  <loc>\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"https://leerob.io\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"route\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:`</loc>\\r\n`})]})})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`              </url>\\r\n`})})})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"            \"}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:`)\\r\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`          .join('')}\\r\n`})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`    </urlset>\\r\n`})})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"    \"}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" formatted \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" prettier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"format\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sitemap\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token spread operator\",children:\"...\"}),\"prettierConfig\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"parser\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'html'\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// eslint-disable-next-line no-sync\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"writeFileSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'public/sitemap.xml'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" formatted\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"generate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Finally, add \",(0,e.jsx)(n.code,{children:\"postbuild\"}),\" script in your \",(0,e.jsx)(n.code,{children:\"package.json\"}),\" to run this script after \",(0,e.jsx)(n.code,{children:\"next build\"}),` completes.\\r\nYour generated file gets created at `,(0,e.jsx)(n.code,{children:\"public/sitemap.xml\"}),\" which is then accessible from the root of your site.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"language-json code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"scripts\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"build\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"next build\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"postbuild\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node ./scripts/generate-sitemap.mjs\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"dev\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"next dev\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"start\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"next start\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"lint\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"next lint\"'}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"external-content\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#external-content\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"External Content\"]}),`\n`,(0,e.jsx)(n.p,{children:`If you have externally hosted data (e.g., a CMS), you'll need to make an API request\\r\nbefore you can create your sitemap. This implementation will vary depending on your data source,\\r\nbut the idea is the same. To demonstrate, I've created an example using placeholder data.`}),`\n`,(0,e.jsxs)(n.p,{children:[\"First, create a new file at \",(0,e.jsx)(n.code,{children:\"pages/sitemap.xml.js\"}),\".\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Sitemap\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"React\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Component\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getInitialProps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" res \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" request \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"EXTERNAL_DATA_URL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" posts \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" request\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"setHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Content-Type'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'text/xml'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"write\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"createSitemap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"posts\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"end\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Sitemap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"When the route \",(0,e.jsx)(n.code,{children:\"/sitemap.xml\"}),` is initially loaded, we will fetch posts from an external data source\\r\nand then write an XML file as the response.`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"EXTERNAL_DATA_URL\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'https://jsonplaceholder.typicode.com/posts'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"createSitemap\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"posts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\r\n`})]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`    <urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\\r\n`})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"        \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),`posts\\r\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" id \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`\\r\n`})]})]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`                <url>\\r\n`})})})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"                    <loc>\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"EXTERNAL_DATA_URL\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"id\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:`</loc>\\r\n`})]})})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token interpolation\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`                </url>\\r\n`})})})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"            \"}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:`)\\r\n`})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`          .join('')}\\r\n`})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token template-string\",children:(0,e.jsx)(n.span,{className:\"token string\",children:`    </urlset>\\r\n`})})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"    \"}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Sitemap\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"React\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Component\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getInitialProps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" res \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" request \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"EXTERNAL_DATA_URL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" posts \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" request\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"setHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Content-Type'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'text/xml'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"write\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"createSitemap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"posts\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"end\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Sitemap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Here's a condensed example of the output.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-xml\",children:(0,e.jsxs)(n.code,{className:\"language-xml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"urlset\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"xmlns\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"http://www.sitemaps.org/schemas/sitemap/0.9\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"https://jsonplaceholder.typicode.com/posts/1\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),\"https://jsonplaceholder.typicode.com/posts/2\",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"loc\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"url\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"urlset\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"robotstxt\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#robotstxt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"robots.txt\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Finally, we can create a static file at \",(0,e.jsx)(n.code,{children:\"public/robots.txt\"}),` to define which\\r\nfiles can be crawled and where the sitemap is located.`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`User-agent: *\\r\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Sitemap: https://leerob.io/sitemap.xml\n`})]})})]})}function b(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var x=b;return w(j);})();\n;return Component;"
  },
  "_id": "blog/nextjs-sitemap-robots.mdx",
  "_raw": {
    "sourceFilePath": "blog/nextjs-sitemap-robots.mdx",
    "sourceFileName": "nextjs-sitemap-robots.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/nextjs-sitemap-robots"
  },
  "type": "Blog",
  "readingTime": {
    "text": "3 min read",
    "minutes": 3.005,
    "time": 180300,
    "words": 601
  },
  "wordCount": 603,
  "tweetIds": [],
  "slug": "nextjs-sitemap-robots"
}