{
  "title": "Mailgun",
  "description": "Send an email to a user.",
  "logo": "mailgun.png",
  "body": {
    "raw": "\r\n```js\r\nconst mailgunSdk = require('mailgun-js');\r\nconst apiKey = process.env.MAILGUN_API_KEY;\r\nconst domain = `mail.${process.env.DOMAIN}`;\r\nconst mailgun = mailgunSdk({ apiKey, domain });\r\n\r\nexport default async (req, res) => {\r\n  let response;\r\n\r\n  try {\r\n    response = await mailgun.messages().send({\r\n      to: req.body.to,\r\n      from: req.body.from,\r\n      subject: req.body.subject,\r\n      text: req.body.text\r\n    });\r\n  } catch (error) {\r\n    return res.status(error.statusCode || 500).json({ error: error.message });\r\n  }\r\n\r\n  return res.status(200).json({ result: response.message });\r\n};\r\n```\r\n\r\n## Usage\r\n\r\n<Step number={1} title=\"Create Mailgun Account\" />\r\n\r\nFirst, [create a Mailgun account](https://signup.mailgun.com/new/signup). Then, retrieve your [API key](https://app.mailgun.com/app/account/security/api_keys).\r\n\r\n<Step number={2} title=\"Add & Verify Domain\" />\r\n\r\nIf you want emails to come from your email address, you'll need to [add a domain](https://app.mailgun.com/app/sending/domains/new).\r\nDon't want this right now? Use the sandbox domain.\r\n\r\n<Step number={3} title=\"Add Environment Variables\" />\r\n\r\nTo securely access the API, we need to include the secret with each request.\r\nWe also _do not_ want to commit secrets to git. Thus, we should use an environment variable.\r\nLearn how to add [environment variables in Vercel](https://vercel.com/docs/environment-variables).\r\n",
    "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),y=(a,n)=>{for(var s in n)t(a,s,{get:n[s],enumerable:!0})},l=(a,n,s,o)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!N.call(a,c)&&c!==s&&t(a,c,{get:()=>n[c],enumerable:!(o=m(n,c))||o.enumerable});return a};var g=(a,n,s)=>(s=a!=null?d(h(a)):{},l(n||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>l(t({},\"__esModule\",{value:!0}),a);var i=k((M,r)=>{r.exports=_jsx_runtime});var j={};y(j,{default:()=>x,frontmatter:()=>w});var e=g(i()),w={title:\"Mailgun\",description:\"Send an email to a user.\",logo:\"mailgun.png\"};function p(a){let n=Object.assign({pre:\"pre\",code:\"code\",span:\"span\",h2:\"h2\",a:\"a\",p:\"p\",em:\"em\"},a.components),{Step:s}=n;return s||_(\"Step\",!0,\"33:1-33:51\"),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" mailgunSdk \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'mailgun-js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" apiKey \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" process\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"env\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"MAILGUN_API_KEY\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" domain \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"mail.\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"process\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"env\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"DOMAIN\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" mailgun \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"mailgunSdk\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" apiKey\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" domain \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    response \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" mailgun\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"messages\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"send\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"to\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"body\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"to\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"body\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"subject\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"body\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"subject\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"body\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"text\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"statusCode\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"500\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"message\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\\r\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\r\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"200\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"result\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"message\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\\r\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"usage\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#usage\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Usage\"]}),`\n`,(0,e.jsx)(s,{number:1,title:\"Create Mailgun Account\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"First, \",(0,e.jsx)(n.a,{href:\"https://signup.mailgun.com/new/signup\",children:\"create a Mailgun account\"}),\". Then, retrieve your \",(0,e.jsx)(n.a,{href:\"https://app.mailgun.com/app/account/security/api_keys\",children:\"API key\"}),\".\"]}),`\n`,(0,e.jsx)(s,{number:2,title:\"Add & Verify Domain\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you want emails to come from your email address, you'll need to \",(0,e.jsx)(n.a,{href:\"https://app.mailgun.com/app/sending/domains/new\",children:\"add a domain\"}),`.\\r\nDon't want this right now? Use the sandbox domain.`]}),`\n`,(0,e.jsx)(s,{number:3,title:\"Add Environment Variables\"}),`\n`,(0,e.jsxs)(n.p,{children:[`To securely access the API, we need to include the secret with each request.\\r\nWe also `,(0,e.jsx)(n.em,{children:\"do not\"}),` want to commit secrets to git. Thus, we should use an environment variable.\\r\nLearn how to add `,(0,e.jsx)(n.a,{href:\"https://vercel.com/docs/environment-variables\",children:\"environment variables in Vercel\"}),\".\"]})]})}function b(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var x=b;function _(a,n,s){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `D:\\\\Linux_Share\\\\reactapp\\\\rifan-blog\\\\data\\\\snippets\\\\_mdx_bundler_entry_point-0217dc80-325b-4f36-8dee-38eec8e3ae03.mdx`\":\"\"))}return f(j);})();\n;return Component;"
  },
  "_id": "snippets/mailgun.mdx",
  "_raw": {
    "sourceFilePath": "snippets/mailgun.mdx",
    "sourceFileName": "mailgun.mdx",
    "sourceFileDir": "snippets",
    "contentType": "mdx",
    "flattenedPath": "snippets/mailgun"
  },
  "type": "Snippet",
  "readingTime": {
    "text": "1 min read",
    "minutes": 0.79,
    "time": 47400,
    "words": 158
  },
  "wordCount": 160,
  "tweetIds": [],
  "slug": "mailgun"
}